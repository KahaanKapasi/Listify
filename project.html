<html>

<head>
  <title>Listify - Task Management</title>
  <link rel="icon" type="image/x-icon" href="/logo.png">
  <link rel="stylesheet" type="text/css" href="dark.css" />
</head>

<body>

  
  <nav id="navbar">
    <div class="navbar-left">
      <img src="placeholder.png" alt="Logo" class="navbar-logo" />
      <span class="navbar-title">Listify</span>
    </div>
    <button id="themeToggle" class="theme-toggle">ðŸŒ“</button>
  </nav>
  
    <center>
    <fieldset>
      <legend align="center">Create a Task</legend>
      Enter Task Name:
      <input type="text" id="taskname" /><br /><br />
      Enter Deadline:
      <input type="time" id="tasktime" /><br /><br />
      Enter Task Priority:
      <select id="taskprio">
        <option>High Priority</option>
        <option>Intermediate Priority</option>
        <option>Low Priority</option>
      </select><br /><br />
      Enter Task Status:
      <select id="taskstat">
        <option>Incomplete</option>
        <option>Completing</option>
        <option>Completed</option>
      </select><br /><br />
      <input type="button" id="tasksub" onclick="sub()" value="Submit Task" /><br />
    </fieldset>
    <p id="list"></p>

    <table cellpadding="100" border="1">
      <tr>
        <th>Task Name</th>
        <th>Task Completion Time</th>
        <th>Task Priority</th>
        <th>Task Status</th>
        <th>Delete</th>
      </tr>
      <tbody id="body"></tbody>
    </table>

  </center>

  <script>
    const tasks = [];
    const time = [];
    const priority = [];
    const status = [];
    const tpriority = [];

    function sub() {
      var taskname = document.getElementById("taskname").value.trim();
      var tasktime = document.getElementById("tasktime").value;
      var taskprio = document.getElementById("taskprio").value;
      var taskstat = document.getElementById("taskstat").value;
      var taskpn;

      if (taskname === "" || tasktime === "") {
        alert("Please enter both Task Name and Time.");
        return;
      }

      if (taskprio === "High Priority") {
        taskpn = 1;
      } else if (taskprio === "Intermediate Priority") {
        taskpn = 2;
      } else if (taskprio === "Low Priority") {
        taskpn = 3;
      }

      tasks.push(taskname);
      time.push(tasktime);
      priority.push(taskprio);
      status.push(taskstat);
      tpriority.push(taskpn);

      // Sorting tasks based on priority
      for (var i = 0; i < tasks.length; i++) {
        for (var j = i + 1; j < tasks.length; j++) {
          if (tpriority[i] > tpriority[j]) {
            var temp;

            temp = tasks[i];
            tasks[i] = tasks[j];
            tasks[j] = temp;

            temp = time[i];
            time[i] = time[j];
            time[j] = temp;

            temp = priority[i];
            priority[i] = priority[j];
            priority[j] = temp;

            temp = status[i];
            status[i] = status[j];
            status[j] = temp;

            temp = tpriority[i];
            tpriority[i] = tpriority[j];
            tpriority[j] = temp;
          }
        }
      }

      updateTable();
    }

    function updateTable() {
      var body = document.getElementById("body");
      body.innerHTML = "";

      for (var i = 0; i < tasks.length; i++) {
        var row = document.createElement("tr");

        var cell1 = document.createElement("td");
        cell1.innerHTML = tasks[i];
        row.appendChild(cell1);

        var cell2 = document.createElement("td");
        cell2.innerHTML = time[i];
        row.appendChild(cell2);

        var cell3 = document.createElement("td");
        cell3.innerHTML = priority[i];
        row.appendChild(cell3);

        var cell4 = document.createElement("td");
        cell4.innerHTML = status[i];
        row.appendChild(cell4);

        var cell5 = document.createElement("td");
        var btn = document.createElement("button");
        btn.innerHTML = "Delete";
        btn.setAttribute("id", "deletebtn");
        btn.setAttribute("onclick", "deleteTask(" + i + ")");
        cell5.appendChild(btn);
        row.appendChild(cell5);

        body.appendChild(row);
      }
    }

    function deleteTask(index) {
      tasks.splice(index, 1);
      time.splice(index, 1);
      priority.splice(index, 1);
      status.splice(index, 1);
      tpriority.splice(index, 1);
      updateTable();
    }
  </script>
</body>

</html>